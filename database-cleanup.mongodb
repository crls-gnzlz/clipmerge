// ========================================
// ğŸ—‘ï¸ ClipChain Database Cleanup Script
// ========================================
// 
// Instructions:
// 1. Open MongoDB Compass
// 2. Connect to your MongoDB instance
// 3. Switch to "clipchain" database
// 4. Open the MongoDB Shell (mongosh) in Compass
// 5. Copy and paste this script
// 6. Press Enter to execute
//
// âš ï¸ WARNING: This will DELETE ALL DATA in the clipchain database!
//
// ========================================

// Switch to clipchain database
db = db.getSiblingDB('clipchain');

print("ğŸ—‘ï¸ Starting ClipChain database cleanup...");

// ========================================
// 1. DROP ALL COLLECTIONS
// ========================================

print("\nğŸ“ Dropping collections...");

// Drop collections (this will remove all data)
db.users.drop();
print("âœ… Users collection dropped");

db.clips.drop();
print("âœ… Clips collection dropped");

db.chains.drop();
print("âœ… Chains collection dropped");

// ========================================
// 2. VERIFY CLEANUP
// ========================================

print("\nğŸ” Verifying cleanup...");

// List all collections to confirm they're gone
const collections = db.getCollectionNames();
print(`ğŸ“‹ Remaining collections: ${collections.length}`);

if (collections.length === 0) {
  print("âœ… All collections successfully removed");
} else {
  print("âš ï¸ Some collections still exist:");
  collections.forEach(collection => print(`   - ${collection}`));
}

// ========================================
// 3. OPTIONAL: DROP ENTIRE DATABASE
// ========================================

print("\nâ“ Do you want to drop the entire database?");
print("   This will remove the clipchain database completely");
print("   Uncomment the following line if you want to proceed:");

// Uncomment the next line to drop the entire database:
// db.dropDatabase();
// print("âœ… clipchain database completely removed");

// ========================================
// 4. SUMMARY
// ========================================

print("\nğŸ“Š Cleanup Summary:");
print("   ğŸ—‘ï¸ All collections dropped");
print("   ğŸ“ Database structure removed");
print("   ğŸ”„ Ready for fresh setup");

print("\nğŸ’¡ To recreate the database:");
print("   1. Run the database-setup.mongodb script");
print("   2. Or use: npm run db:seed (if using Docker setup)");

print("\nâœ… ClipChain database cleanup completed!");
print("ğŸŒ± Database is now clean and ready for fresh data");


